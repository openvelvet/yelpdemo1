<div class="row">
	<div class="col-md-3">
		<%= image_tag @restaurant.image_url %>

		<p>
		  <strong>Name:</strong>
		  <%= @restaurant.name %>
		</p>
		
		<div class="star-rating" data-score= <%= @avg_rating %> ></div>
		<p>
			<%= "#{@reviews.length} reviews"%>
		</p>

		<p>
		  <strong>Address:</strong>
		  <%= @restaurant.address %>
		</p>

		<p>
		  <strong>Phone:</strong>
		  <%= @restaurant.phone %>
		</p>

		<p>
		  <strong>Website:</strong>
		  <%= link_to @restaurant.website, "http://#{@restaurant.website}" %>
		</p>
		<p>
			<strong><%= link_to "Write a Review", new_restaurant_review_path(@restaurant), class: "btn btn-primary" %></strong>
		</p>


		<%= link_to 'Edit', edit_restaurant_path(@restaurant) %> |
		<%= link_to 'Back', restaurants_path %>
	</div>

	<div class="col-md-9"> <!-- Restaurant Reviews -->
		<% if @reviews.blank? %>
			<h3>No reviews yet. Be the first to write one.</h3>
		<% else %>
			<table class="table">
				<tbody>
					<% @reviews.each do |review| %>
						<tr>
							<td><div class="star-rating" data-score= <%= review.rating %> ></div>
							<p><%= h(review.comment).gsub(/\n/, '<br>').html_safe %></p>
							</td>
						</tr>
					<% end %>
				</tbody>
			</table>
		<% end %>
	</div>
</div>

<script>
	$('.star-rating').raty({
		path: 'https://s3.amazonaws.com/yelp-demo-2014/Stars',
		readOnly: true,
		score: function() {
    return $(this).attr('data-score');
  }
	});
</script>